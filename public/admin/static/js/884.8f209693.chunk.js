"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[884],{7884:function(e,n,t){t.r(n);var r=t(3433),i=t(1413),u=t(9439),o=t(2791),a=t(8402),s=t(5595),c=t(3734),l=t(9389),d=t(3272),f=t(3695),m=t(7309),h=t(4997),p=t(8243),x=t(9553),g=t(9286),j=t(184),Z=s.Z.Column,w=c.Z.Option,b=l.Z.TextArea;n.default=function(){var e=(0,o.useState)(),n=(0,u.Z)(e,2),t=n[0],I=n[1],k=(0,o.useState)(!1),y=(0,u.Z)(k,2),_=y[0],v=y[1],q=(0,o.useState)(null),C=(0,u.Z)(q,2),S=C[0],P=C[1],F=d.Z.useForm(),A=(0,u.Z)(F,1)[0];(0,o.useEffect)((function(){(0,a.yF)().then((function(e){I(e.data.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{_id:e._id.slice(0,7),id:e._id})})))}))}),[]);var z=function(){v(!1),P(null),A.resetFields()};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(m.Z,{type:"primary",className:"bg-blue-600",onClick:function(){return v(!0)},children:"\u6dfb\u52a0\u4ea7\u54c1"}),(0,j.jsx)(h.Z,{title:"\u6dfb\u52a0\u4ea7\u54c1",centered:!0,visible:_,onCancel:z,width:1e3,keyboard:!1,maskClosable:!1,footer:[],children:(0,j.jsxs)(d.Z,{labelCol:{span:4},form:A,name:"control-hooks",onFinish:function(e){(0,a.Mc)((0,i.Z)((0,i.Z)({},e),{},{imageUrl:S})).then((function(e){f.ZP.success("\u4fdd\u5b58\u6210\u529f"),z();var n=t.filter((function(n){return n.id!==e.data._id}));I([].concat((0,r.Z)(n),[(0,i.Z)((0,i.Z)({},e.data),{},{_id:e.data._id.slice(0,7),id:e.data._id})]))}))},children:[(0,j.jsx)(d.Z.Item,{name:"id",style:{display:"none"},children:(0,j.jsx)(l.Z,{})}),(0,j.jsx)(d.Z.Item,{name:"name",label:"\u4ea7\u54c1\u540d\u79f0",rules:[{required:!0}],children:(0,j.jsx)(l.Z,{})}),(0,j.jsx)(d.Z.Item,{name:"issue",label:"\u671f\u6570",rules:[{required:!0}],children:(0,j.jsx)(p.Z,{min:1})}),(0,j.jsx)(d.Z.Item,{name:"price",label:"\u5355\u4ef7",rules:[{required:!0}],children:(0,j.jsx)(p.Z,{min:1})}),(0,j.jsx)(d.Z.Item,{name:"stock",label:"\u5e93\u5b58",rules:[{required:!0}],children:(0,j.jsx)(p.Z,{min:1})}),(0,j.jsx)(d.Z.Item,{name:"period",label:"\u8fd0\u884c\u5468\u671f",rules:[{required:!0}],children:(0,j.jsx)(p.Z,{min:1})}),(0,j.jsx)(d.Z.Item,{name:"income",label:"\u6536\u76ca",rules:[{required:!0}],children:(0,j.jsx)(p.Z,{min:0,stringMode:!0})}),(0,j.jsx)(d.Z.Item,{name:"limit",label:"\u9650\u8d2d",rules:[{required:!0}],children:(0,j.jsx)(p.Z,{min:1})}),(0,j.jsx)(d.Z.Item,{name:"status",label:"\u72b6\u6001",rules:[{required:!0}],children:(0,j.jsxs)(c.Z,{placeholder:"\u8bf7\u9009\u62e9\u4ea7\u54c1\u662f\u4e0a\u67b6\u8fd8\u662f\u4e0b\u67b6",allowClear:!0,children:[(0,j.jsx)(w,{value:0,children:"\u4e0a\u67b6"}),(0,j.jsx)(w,{value:1,children:"\u4e0b\u67b6"})]})}),(0,j.jsx)(d.Z.Item,{name:"detail",label:"\u8be6\u60c5",children:(0,j.jsx)(b,{rows:4,placeholder:"\u8f93\u5165\u4ea7\u54c1\u63cf\u8ff0"})}),(0,j.jsx)(d.Z.Item,{label:"\u7f29\u7565\u56fe",children:(0,j.jsx)(x.Z,{style:{display:"flex",justifyContent:"center",alignItems:"center"},name:"file",action:"/api/common/uploads",headers:localStorage.getItem("__admin_token")?{Authorization:"Bearer ".concat(localStorage.__admin_token)}:null,showUploadList:!1,onChange:function(e){"done"===e.file.status?(f.ZP.success("\u6587\u4ef6\u4e0a\u4f20\u6210\u529f"),P(e.file.response)):"error"===e.file.status&&f.ZP.error("\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25")},children:S?(0,j.jsx)("img",{src:"/uploads/"+S,alt:"avatar",style:{width:"6rem",height:"6rem"}}):(0,j.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"6rem",height:"6rem"},children:(0,j.jsx)(g.Z,{})})})}),(0,j.jsx)(d.Z.Item,{wrapperCol:{span:4,offset:4},children:(0,j.jsx)(m.Z,{type:"link",htmlType:"submit",children:"\u4fdd\u5b58"})})]})}),(0,j.jsxs)(s.Z,{dataSource:t,rowKey:"id",children:[(0,j.jsx)(Z,{title:"\u7f16\u53f7",dataIndex:"_id"}),(0,j.jsx)(Z,{title:"\u540d\u79f0",dataIndex:"name"}),(0,j.jsx)(Z,{title:"\u5c01\u9875\u56fe\u7247",dataIndex:"freeze",render:function(e,n){return(0,j.jsx)("img",{src:"/uploads/"+n.imageUrl,alt:"product",style:{width:"4rem",height:"4rem"}})}}),(0,j.jsx)(Z,{title:"\u5355\u4ef7",dataIndex:"price"}),(0,j.jsx)(Z,{title:"\u6536\u76ca",dataIndex:"income"}),(0,j.jsx)(Z,{title:"\u8d2d\u4e70\u603b\u6570",dataIndex:"stock"}),(0,j.jsx)(Z,{title:"\u9650\u8d2d\u6570\u91cf",dataIndex:"limit"}),(0,j.jsx)(Z,{title:"\u5f53\u524d\u72b6\u6001",render:function(e,n){return n.status?"\u4e0b\u67b6":"\u4e0a\u67b6"}}),(0,j.jsx)(Z,{title:"\u64cd\u4f5c",dataIndex:"",render:function(e,n){return(0,j.jsxs)("div",{children:[(0,j.jsx)(m.Z,{type:"link",onClick:function(){return function(e){A.setFieldsValue(e),P(e.imageUrl),v(!0)}(n)},children:"\u4fee\u6539"}),(0,j.jsx)(m.Z,{type:"link",onClick:function(){return function(e){(0,a.tT)(e.id).then((function(n){var r=t.filter((function(n){return n.id!==e.id}));I(r)}))}(n)},children:"\u5220\u9664"})]})}})]})]})}},8402:function(e,n,t){t.d(n,{xq:function(){return j},jP:function(){return w},fH:function(){return Z},Gm:function(){return x},hI:function(){return g},JY:function(){return l},o7:function(){return d},K9:function(){return F},Ig:function(){return s},QZ:function(){return y},Ip:function(){return v},yD:function(){return _},yF:function(){return q},tT:function(){return S},Mc:function(){return C},AA:function(){return A},pk:function(){return c},sV:function(){return b},ps:function(){return k},jy:function(){return I},jg:function(){return O},kT:function(){return T},Oi:function(){return P},dB:function(){return m},GG:function(){return f},ie:function(){return p},fv:function(){return h},GW:function(){return B},Bh:function(){return L},cc:function(){return M},bK:function(){return z}});var r=t(4569),i=t.n(r),u=t(3695),o=i().create({baseURL:"/api/admin",withCredentials:!0});o.interceptors.request.use((function(e){return localStorage.__admin_token&&(e.headers.Authorization="Bearer "+localStorage.__admin_token),localStorage.i18nextLng&&(e.headers["Accept-Language"]=localStorage.i18nextLng),e}),(function(e){return Promise.reject(e)})),o.interceptors.response.use((function(e){return e.data.message&&u.ZP.success(e.data.message),e}),(function(e){return 401===e.response.status&&(localStorage.removeItem("__admin_token"),-1===window.location.pathname.indexOf("login")&&-1===window.location.pathname.indexOf("register")&&(window.location.hash="/login")),e.response.data?(u.ZP.error(e.response.data.message),Promise.reject(e)):Promise.reject(e)}));var a=o,s=function(e){return a.post("/public/login",e)},c=function(e){return a.post("/public/register",e)},l=function(){return a.get("/../common/captcha")},d=function(){return a.get("/info/dashboard")},f=function(){return a.get("/user")},m=function(e){return a.delete("/user/"+e)},h=function(e){return a.get("/wallet/"+e)},p=function(e){return a.post("/wallet",e)},x=function(e){return a.get("/bank/"+e)},g=function(e){return a.post("/bank",e)},j=function(){return a.get("/user/admin")},Z=function(e){return a.post("/user/admin",e)},w=function(e){return a.delete("/user/admin/"+e)},b=function(){return a.get("/rotate")},I=function(e){return a.post("/rotate",e)},k=function(e){return a.delete("/rotate/"+e)},y=function(){return a.get("/post")},_=function(e){return a.post("/post",e)},v=function(e){return a.delete("/post/"+e)},q=function(){return a.get("/product")},C=function(e){return a.post("/product",e)},S=function(e){return a.delete("/product/"+e)},P=function(){return a.get("/transaction")},F=function(){return a.get("/finance")},A=function(){return a.get("/recharge")},z=function(){return a.get("/withdraw")},B=function(e){return a.post("/withdraw",e)},L=function(e){return a.put("/withdraw",e)},M=function(e){return a.delete("/withdraw/"+e)},O=function(e){return a.get("/set/"+e)},T=function(e){return a.post("/set",e)}},9286:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(1413),i=t(2791),u={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},o=t(4291),a=function(e,n){return i.createElement(o.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:n,icon:u}))};a.displayName="PlusOutlined";var s=i.forwardRef(a)}}]);
//# sourceMappingURL=884.8f209693.chunk.js.map