"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[172],{8344:function(n,t,e){e.r(t);var r=e(3433),i=e(1413),u=e(9439),o=e(2791),c=e(8402),a=e(5595),s=e(3695),f=e(7309),d=e(4997),l=e(9553),p=e(9286),m=e(184),g=a.Z.Column;t.default=function(){var n=(0,o.useState)(),t=(0,u.Z)(n,2),e=t[0],h=t[1],x=(0,o.useState)(!1),w=(0,u.Z)(x,2),y=w[0],j=w[1],_=(0,o.useState)(null),k=(0,u.Z)(_,2),Z=k[0],v=k[1];(0,o.useEffect)((function(){(0,c.sV)().then((function(n){h(n.data.map((function(n){return(0,i.Z)((0,i.Z)({},n),{},{_id:n._id.slice(0,7),id:n._id})})))}))}),[]);var b=function(){j(!1),v(null)};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(f.Z,{type:"primary",className:"bg-blue-600",onClick:function(){return j(!0)},children:"\u6dfb\u52a0\u6a2a\u5e45"}),(0,m.jsx)(d.Z,{title:"\u6dfb\u52a0\u9996\u9875\u6a2a\u5e45",centered:!0,visible:y,onOk:function(){(0,c.jy)({imageUrl:Z}).then((function(n){s.ZP.success("\u6dfb\u52a0\u6210\u529f"),b(),h([].concat((0,r.Z)(e),[{_id:n.data._id.slice(0,7),id:n.data._id,imgUrl:n.data.imgUrl}]))}))},onCancel:b,width:1e3,okButtonProps:{type:"primary"},cancelButtonProps:{danger:!0,type:"primary"},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",closable:!1,keyboard:!1,maskClosable:!1,children:(0,m.jsx)(l.Z,{style:{display:"flex",justifyContent:"center",alignItems:"center"},name:"file",action:"/api/common/uploads",headers:localStorage.getItem("__admin_token")?{Authorization:"Bearer ".concat(localStorage.__admin_token)}:null,showUploadList:!1,onChange:function(n){"done"===n.file.status?(s.ZP.success("\u6587\u4ef6\u4e0a\u4f20\u6210\u529f"),v(n.file.response)):"error"===n.file.status&&s.ZP.error("\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25")},children:Z?(0,m.jsx)("img",{src:"/uploads/"+Z,alt:"avatar",style:{width:"18rem",height:"6rem"}}):(0,m.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"18rem",height:"6rem"},children:[(0,m.jsx)(p.Z,{}),(0,m.jsx)("div",{style:{marginTop:8},children:"Upload"})]})})}),(0,m.jsxs)(a.Z,{dataSource:e,rowKey:"id",children:[(0,m.jsx)(g,{title:"\u7f16\u53f7",dataIndex:"_id"}),(0,m.jsx)(g,{title:"\u7f29\u7565\u56fe",dataIndex:"imgUrl",render:function(n,t){return(0,m.jsx)("img",{src:"/uploads/"+t.imgUrl,alt:"img",style:{width:"12rem",height:"6rem"}})}}),(0,m.jsx)(g,{title:"\u64cd\u4f5c",dataIndex:"",render:function(n,t){return(0,m.jsx)("div",{className:"flex gap-1",children:(0,m.jsx)(f.Z,{danger:!0,onClick:function(){return function(n){(0,c.ps)(n.id).then((function(t){var r=e.filter((function(t){return t.id!==n.id}));h(r)}))}(t)},children:"\u5220\u9664"})})}})]})]})}},8402:function(n,t,e){e.d(t,{c6:function(){return v},t$:function(){return b},xq:function(){return g},jP:function(){return x},fH:function(){return h},JY:function(){return f},ws:function(){return C},Fi:function(){return P},o7:function(){return d},K9:function(){return L},Ig:function(){return a},QZ:function(){return _},Ip:function(){return Z},yD:function(){return k},yF:function(){return U},tT:function(){return B},Mc:function(){return A},AA:function(){return T},tu:function(){return E},pk:function(){return s},sV:function(){return w},ps:function(){return j},jy:function(){return y},jg:function(){return K},kT:function(){return N},kP:function(){return S},_2:function(){return I},dB:function(){return p},tN:function(){return m},GG:function(){return l},GW:function(){return D},cc:function(){return F},bK:function(){return G}});var r=e(4569),i=e.n(r),u=e(3695),o=i().create({baseURL:"/api/admin",withCredentials:!0});o.interceptors.request.use((function(n){return localStorage.__admin_token&&(n.headers.Authorization="Bearer "+localStorage.__admin_token),localStorage.i18nextLng&&(n.headers["Accept-Language"]=localStorage.i18nextLng),n}),(function(n){return Promise.reject(n)})),o.interceptors.response.use((function(n){return n.data.message&&u.ZP.success(n.data.message),n}),(function(n){return 401===n.response.status&&(localStorage.removeItem("__admin_token"),-1===window.location.pathname.indexOf("login")&&-1===window.location.pathname.indexOf("register")&&(window.location.hash="/login")),n.response.data?(u.ZP.error(n.response.data.message),Promise.reject(n)):Promise.reject(n)}));var c=o,a=function(n){return c.post("/login",n)},s=function(n){return c.post("/register",n)},f=function(){return c.get("/../common/captcha")},d=function(){return c.get("/info/dashboard")},l=function(){return c.get("/user/list")},p=function(n){return c.get("/user/user/"+n)},m=function(n){return c.post("/user/user",n)},g=function(){return c.get("/user/admin")},h=function(n){return c.post("/user/admin",n)},x=function(n){return c.delete("/user/admin/"+n)},w=function(){return c.get("/info/rotate")},y=function(n){return c.post("/info/rotate",n)},j=function(n){return c.delete("/info/rotate/"+n)},_=function(){return c.get("/info/post")},k=function(n){return c.post("/info/post",n)},Z=function(n){return c.delete("/info/post/"+n)},v=function(){return c.get("/info/about")},b=function(n){return c.post("/info/about",n)},C=function(){return c.get("/info/center")},P=function(n){return c.post("/info/center",n)},S=function(){return c.get("/info/share")},I=function(n){return c.post("/info/share",n)},U=function(){return c.get("/product")},A=function(n){return c.post("/product",n)},B=function(n){return c.delete("/product/"+n)},E=function(){return c.get("/product/record")},L=function(){return c.get("/price/financial")},T=function(){return c.get("/price/rechage")},G=function(){return c.get("/price/withdraw")},D=function(n){return c.post("/price/withdraw",n)},F=function(n){return c.delete("/price/withdraw/"+n)},K=function(n){return c.get("/set/"+n)},N=function(n){return c.post("/set",n)}},6096:function(n,t,e){e.d(t,{fk:function(){return o},jD:function(){return u}});var r,i=e(4937),u=function(){return(0,i.Z)()&&window.document.documentElement},o=function(){if(!u())return!1;if(void 0!==r)return r;var n=document.createElement("div");return n.style.display="flex",n.style.flexDirection="column",n.style.rowGap="1px",n.appendChild(document.createElement("div")),n.appendChild(document.createElement("div")),document.body.appendChild(n),r=1===n.scrollHeight,document.body.removeChild(n),r}}}]);
//# sourceMappingURL=172.eb92f5ec.chunk.js.map