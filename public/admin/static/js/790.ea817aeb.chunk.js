"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[790],{3790:function(n,t,e){e.r(t);var r=e(3433),u=e(1413),i=e(9439),o=e(2791),c=e(8402),s=e(5595),a=e(3734),f=e(3272),d=e(3695),l=e(7309),p=e(4997),h=e(9389),m=e(184),g=s.Z.Column,x=a.Z.Option;t.default=function(){var n=(0,o.useState)(),t=(0,i.Z)(n,2),e=t[0],Z=t[1],j=(0,o.useState)(!1),w=(0,i.Z)(j,2),b=w[0],k=w[1],_=f.Z.useForm(),v=(0,i.Z)(_,1)[0];(0,o.useEffect)((function(){(0,c.xq)().then((function(n){Z(n.data.map((function(n){return(0,u.Z)((0,u.Z)({},n),{},{id:n._id.slice(0,7)})})))}))}),[]);var y=function(){k(!1),v.resetFields()};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(l.Z,{type:"primary",className:"bg-blue-600",onClick:function(){return k(!0)},children:"\u6dfb\u52a0\u7ba1\u7406\u5458"}),(0,m.jsx)(p.Z,{title:"\u6dfb\u52a0\u4ea7\u54c1",centered:!0,visible:b,onCancel:y,width:1e3,keyboard:!1,maskClosable:!1,footer:[],children:(0,m.jsxs)(f.Z,{labelCol:{span:4},form:v,name:"control-hooks",onFinish:function(n){(0,c.fH)(n).then((function(n){d.ZP.success("\u4fdd\u5b58\u6210\u529f"),y();var t=e.filter((function(t){return t.id!==n.data._id}));Z([].concat((0,r.Z)(t),[(0,u.Z)((0,u.Z)({},n.data),{},{id:n.data._id.slice(0,7)})]))}))},children:[(0,m.jsx)(f.Z.Item,{name:"id",style:{display:"none"},children:(0,m.jsx)(h.Z,{})}),(0,m.jsx)(f.Z.Item,{label:"\u7528\u6237\u540d",name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d!"}],children:(0,m.jsx)(h.Z,{})}),(0,m.jsx)(f.Z.Item,{label:"\u5bc6\u7801",name:"passwd",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}],children:(0,m.jsx)(h.Z.Password,{})}),(0,m.jsx)(f.Z.Item,{name:"permissions",label:"\u6743\u9650",rules:[{required:!0}],children:(0,m.jsxs)(a.Z,{placeholder:"\u8bf7\u9009\u62e9\u65b0\u589e\u7ba1\u7406\u5458\u6743\u9650",allowClear:!0,children:[(0,m.jsx)(x,{value:0,children:"\u666e\u901a\u7ba1\u7406\u5458"}),(0,m.jsx)(x,{value:1,children:"\u8d85\u7ea7\u7ba1\u7406\u5458"})]})})]})}),(0,m.jsxs)(s.Z,{dataSource:e,rowKey:"_id",children:[(0,m.jsx)(g,{title:"\u7f16\u53f7",dataIndex:"id"}),(0,m.jsx)(g,{title:"\u540d\u79f0",dataIndex:"username"}),(0,m.jsx)(g,{title:"\u6743\u9650",render:function(n,t){return t.permissions?"\u7ba1\u7406\u8005":"\u5ba2\u670d"}}),(0,m.jsx)(g,{title:"\u64cd\u4f5c",dataIndex:"",render:function(n,t){return(0,m.jsxs)("div",{children:[(0,m.jsx)(l.Z,{type:"link",onClick:function(){return function(n){v.setFieldsValue(n),k(!0)}(t)},children:"\u4fee\u6539"}),(0,m.jsx)(l.Z,{type:"link",onClick:function(){return function(n){(0,c.jP)(n.id).then((function(t){var r=e.filter((function(t){return t.id!==n.id}));Z(r)}))}(t)},children:"\u5220\u9664"})]})}})]})]})}},8402:function(n,t,e){e.d(t,{c6:function(){return y},t$:function(){return C},xq:function(){return g},jP:function(){return Z},fH:function(){return x},JY:function(){return f},ws:function(){return I},Fi:function(){return P},o7:function(){return d},K9:function(){return G},Ig:function(){return s},QZ:function(){return k},Ip:function(){return v},yD:function(){return _},yF:function(){return q},tT:function(){return L},Mc:function(){return A},AA:function(){return K},tu:function(){return B},pk:function(){return a},sV:function(){return j},ps:function(){return b},jy:function(){return w},jg:function(){return T},kT:function(){return V},kP:function(){return S},_2:function(){return F},dB:function(){return p},RZ:function(){return m},tN:function(){return h},GG:function(){return l},GW:function(){return H},Bh:function(){return N},cc:function(){return R},bK:function(){return O}});var r=e(4569),u=e.n(r),i=e(3695),o=u().create({baseURL:"/api/admin",withCredentials:!0});o.interceptors.request.use((function(n){return localStorage.__admin_token&&(n.headers.Authorization="Bearer "+localStorage.__admin_token),localStorage.i18nextLng&&(n.headers["Accept-Language"]=localStorage.i18nextLng),n}),(function(n){return Promise.reject(n)})),o.interceptors.response.use((function(n){return n.data.message&&i.ZP.success(n.data.message),n}),(function(n){return 401===n.response.status&&(localStorage.removeItem("__admin_token"),-1===window.location.pathname.indexOf("login")&&-1===window.location.pathname.indexOf("register")&&(window.location.hash="/login")),n.response.data?(i.ZP.error(n.response.data.message),Promise.reject(n)):Promise.reject(n)}));var c=o,s=function(n){return c.post("/login",n)},a=function(n){return c.post("/register",n)},f=function(){return c.get("/../common/captcha")},d=function(){return c.get("/info/dashboard")},l=function(){return c.get("/user/list")},p=function(n){return c.get("/user/user/"+n)},h=function(n){return c.post("/user/user",n)},m=function(){return c.get("/user/bank")},g=function(){return c.get("/user/admin")},x=function(n){return c.post("/user/admin",n)},Z=function(n){return c.delete("/user/admin/"+n)},j=function(){return c.get("/info/rotate")},w=function(n){return c.post("/info/rotate",n)},b=function(n){return c.delete("/info/rotate/"+n)},k=function(){return c.get("/info/post")},_=function(n){return c.post("/info/post",n)},v=function(n){return c.delete("/info/post/"+n)},y=function(){return c.get("/info/about")},C=function(n){return c.post("/info/about",n)},I=function(){return c.get("/info/center")},P=function(n){return c.post("/info/center",n)},S=function(){return c.get("/info/share")},F=function(n){return c.post("/info/share",n)},q=function(){return c.get("/product")},A=function(n){return c.post("/product",n)},L=function(n){return c.delete("/product/"+n)},B=function(){return c.get("/product/record")},G=function(){return c.get("/price/financial")},K=function(){return c.get("/price/rechage")},O=function(){return c.get("/price/withdraw")},H=function(n){return c.post("/price/withdraw",n)},N=function(n){return c.put("/price/withdraw",n)},R=function(n){return c.delete("/price/withdraw/"+n)},T=function(n){return c.get("/set/"+n)},V=function(n){return c.post("/set",n)}}}]);
//# sourceMappingURL=790.ea817aeb.chunk.js.map