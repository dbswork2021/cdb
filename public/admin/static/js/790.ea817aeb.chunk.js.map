{"version":3,"file":"static/js/790.ea817aeb.chunk.js","mappings":"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","sources":["pages/Admin.jsx","utils/http.js","utils/Api.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { AdminApi, AdminSaveApi, AdminDelApi } from 'utils/Api';\nimport {\n  Table,\n  Button,\n  Modal,\n  message,\n  Form,\n  Input,\n  Select,\n} from 'antd';\nconst { Column } = Table;\nconst { Option } = Select;\n\nconst Admin = () => {\n  const [tableData, setTableData] = useState();\n  const [visible, setVisible] = useState(false);\n  const [form] = Form.useForm();\n\n  useEffect(() => {\n    AdminApi().then((res) => {\n      setTableData(\n        res.data.map((item) => ({\n          ...item,\n          id: item._id.slice(0, 7),\n        }))\n      );\n    });\n  }, []);\n\n  const edit = (record) => {\n    form.setFieldsValue(record);\n    setVisible(true);\n  };\n  const del = (record) => {\n    AdminDelApi(record.id).then((res) => {\n      const newTableData = tableData.filter((item) => item.id !== record.id);\n      setTableData(newTableData);\n    });\n  };\n\n  const onFinish = (value) => {\n    AdminSaveApi(value).then((res) => {\n      message.success('保存成功');\n      onCancel();\n      const swapData = tableData.filter((item) => item.id !== res.data._id);\n      setTableData([\n        ...swapData,\n        {\n          ...res.data,\n          id: res.data._id.slice(0, 7),\n        },\n      ]);\n    });\n  };\n\n  const onCancel = () => {\n    setVisible(false);\n    form.resetFields();\n  };\n\n  return (\n    <>\n      <Button\n        type=\"primary\"\n        className=\"bg-blue-600\"\n        onClick={() => setVisible(true)}\n      >\n        添加管理员\n      </Button>\n      <Modal\n        title=\"添加产品\"\n        centered\n        visible={visible}\n        onCancel={onCancel}\n        width={1000}\n        keyboard={false}\n        maskClosable={false}\n        footer={[]}\n      >\n        <Form\n          labelCol={{ span: 4 }}\n          form={form}\n          name=\"control-hooks\"\n          onFinish={onFinish}\n        >\n          <Form.Item name=\"id\" style={{ display: 'none' }}>\n            <Input />\n          </Form.Item>\n        <Form.Item\n          label=\"用户名\"\n          name=\"username\"\n          rules={[{ required: true, message: '请输入用户名!' }]}\n        >\n          <Input />\n        </Form.Item>\n\n        <Form.Item\n          label=\"密码\"\n          name=\"passwd\"\n          rules={[{ required: true, message: '请输入密码' }]}\n        >\n          <Input.Password />\n        </Form.Item>\n          <Form.Item name=\"permissions\" label=\"权限\" rules={[{ required: true }]}>\n            <Select placeholder=\"请选择新增管理员权限\" allowClear>\n              <Option value={0}>普通管理员</Option>\n              <Option value={1}>超级管理员</Option>\n            </Select>\n          </Form.Item>\n        </Form>\n      </Modal>\n      <Table dataSource={tableData} rowKey=\"_id\">\n        <Column title=\"编号\" dataIndex=\"id\" />\n        <Column title=\"名称\" dataIndex=\"username\" />\n        <Column title=\"权限\" render={(_,record) => record.permissions ? '管理者' : '客服'} />\n        <Column\n          title=\"操作\"\n          dataIndex=\"\"\n          render={(_, record) => (\n            <div>\n              <Button type=\"link\" onClick={() => edit(record)}>\n                修改\n              </Button>\n              <Button type=\"link\" onClick={() => del(record)}>\n                删除\n              </Button>\n            </div>\n          )}\n        />\n      </Table>\n    </>\n  );\n};\n\nexport default Admin;\n","import Axios from 'axios';\nimport { message } from 'antd';\n\nconst http = Axios.create({\n  baseURL: process.env.REACT_APP_API_SERVER,\n  withCredentials: true,\n});\n\nhttp.interceptors.request.use(\n  (config) => {\n    if (localStorage.__admin_token) {\n      config.headers.Authorization = 'Bearer ' + localStorage.__admin_token;\n    }\n    if (localStorage.i18nextLng) {\n      config.headers['Accept-Language'] = localStorage.i18nextLng;\n    }\n    return config;\n  },\n  (err) => {\n    return Promise.reject(err);\n  }\n);\n\nhttp.interceptors.response.use(\n  (res) => {\n    if (res.data.message) {\n      message.success(res.data.message);\n    }\n    return res;\n  },\n  (err) => {\n\t\t\n\t\t\n    if (err.response.status === 401) {\n      localStorage.removeItem('__admin_token');\n\t\t\t\n      if (\n        window.location.pathname.indexOf('login') === -1 && \n\t\t\t\t\twindow.location.pathname.indexOf('register') === -1\n\t\t\t) {\n        window.location.hash = '/login';\n      }\n    }\n\n    if (err.response.data) {\n      message.error(err.response.data.message);\n      return Promise.reject(err);\n    }\n    return Promise.reject(err);\n  }\n);\n\nexport default http;\n","import http from './http'\n\n\nexport const LoginApi = (model) => http.post('/login', model)\nexport const RegisterApi = (model) => http.post('/register', model)\nexport const CaptchaApi = () => http.get('/../common/captcha')\n\nexport const DashBoardApi = () => http.get('/info/dashboard')\n\nexport const UserListApi = () => http.get('/user/list')\nexport const UserBanApi = (id) => http.get('/user/user/' + id)\nexport const UserEditApi = (model) => http.post('/user/user', model)\nexport const UserBankApi = () => http.get('/user/bank')\n\nexport const AdminApi = () => http.get('/user/admin')\nexport const AdminSaveApi = (model) => http.post('/user/admin', model)\nexport const AdminDelApi = (id) => http.delete('/user/admin/' + id)\n\nexport const RostateApi = () => http.get('/info/rotate')\nexport const RostateSaveApi = (model) => http.post('/info/rotate', model)\nexport const RostateDelApi = (id) => http.delete('/info/rotate/' + id)\n\nexport const PostApi = () => http.get('/info/post')\nexport const PostSaveApi = (model) => http.post('/info/post', model)\nexport const PostDelApi = (id) => http.delete('/info/post/' + id)\n\nexport const AboutApi = () => http.get('/info/about')\nexport const AboutSaveApi = (model) => http.post('/info/about', model)\n\nexport const CenterApi = () => http.get('/info/center')\nexport const CenterSaveApi = (model) => http.post('/info/center', model)\n\nexport const ShareApi = () => http.get('/info/share')\nexport const ShareSaveApi = (model) => http.post('/info/share', model)\n\nexport const ProductApi = () => http.get('/product')\nexport const ProductSaveApi = (model) => http.post('/product', model)\nexport const ProductDelApi = (id) => http.delete('/product/' + id)\n\nexport const RecordApi = () => http.get('/product/record')\n\nexport const FinancialApi = () => http.get('/price/financial')\nexport const RechageApi = () => http.get('/price/rechage')\n\nexport const WithdrawListApi = () => http.get('/price/withdraw')\nexport const WithdrawAllowApi = (model) => http.post('/price/withdraw', model)\nexport const WithdrawAllowHandlApi = (model) => http.put('/price/withdraw', model)\nexport const WithdrawDelApi = (id) => http.delete('/price/withdraw/' + id)\n\nexport const SetApi = (type) => http.get('/set/' + type)\nexport const SetSaveApi = (model) => http.post('/set', model)\n\n"],"names":["Column","Table","Option","Select","useState","tableData","setTableData","visible","setVisible","Form","form","useEffect","AdminApi","then","res","data","map","item","id","_id","slice","onCancel","resetFields","type","className","onClick","title","centered","width","keyboard","maskClosable","footer","labelCol","span","name","onFinish","value","AdminSaveApi","message","swapData","filter","style","display","label","rules","required","placeholder","allowClear","dataSource","rowKey","dataIndex","render","_","record","permissions","setFieldsValue","edit","AdminDelApi","newTableData","del","http","Axios","baseURL","process","withCredentials","interceptors","request","use","config","localStorage","__admin_token","headers","Authorization","i18nextLng","err","Promise","reject","response","status","removeItem","window","location","pathname","indexOf","hash","LoginApi","model","RegisterApi","CaptchaApi","DashBoardApi","UserListApi","UserBanApi","UserEditApi","UserBankApi","RostateApi","RostateSaveApi","RostateDelApi","PostApi","PostSaveApi","PostDelApi","AboutApi","AboutSaveApi","CenterApi","CenterSaveApi","ShareApi","ShareSaveApi","ProductApi","ProductSaveApi","ProductDelApi","RecordApi","FinancialApi","RechageApi","WithdrawListApi","WithdrawAllowApi","WithdrawAllowHandlApi","WithdrawDelApi","SetApi","SetSaveApi"],"sourceRoot":""}