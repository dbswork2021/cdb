"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[790],{3790:function(n,e,t){t.r(e);var r=t(3433),u=t(1413),i=t(9439),o=t(2791),c=t(8402),s=t(5595),a=t(3734),f=t(3272),l=t(3695),d=t(7309),p=t(4997),m=t(9389),h=t(184),g=s.Z.Column,x=a.Z.Option;e.default=function(){var n=(0,o.useState)(),e=(0,i.Z)(n,2),t=e[0],j=e[1],Z=(0,o.useState)(!1),w=(0,i.Z)(Z,2),b=w[0],k=w[1],v=f.Z.useForm(),_=(0,i.Z)(v,1)[0];(0,o.useEffect)((function(){(0,c.xq)().then((function(n){j(n.data.map((function(n){return(0,u.Z)((0,u.Z)({},n),{},{id:n._id.slice(0,7)})})))}))}),[]);var y=function(){k(!1),_.resetFields()};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(d.Z,{type:"primary",className:"bg-blue-600",onClick:function(){return k(!0)},children:"\u6dfb\u52a0\u7ba1\u7406\u5458"}),(0,h.jsx)(p.Z,{title:"\u6dfb\u52a0\u4ea7\u54c1",centered:!0,visible:b,onCancel:y,width:1e3,keyboard:!1,maskClosable:!1,footer:[],children:(0,h.jsxs)(f.Z,{labelCol:{span:4},form:_,name:"control-hooks",onFinish:function(n){(0,c.fH)(n).then((function(n){l.ZP.success("\u4fdd\u5b58\u6210\u529f"),y();var e=t.filter((function(e){return e.id!==n.data._id}));j([].concat((0,r.Z)(e),[(0,u.Z)((0,u.Z)({},n.data),{},{id:n.data._id.slice(0,7)})]))}))},children:[(0,h.jsx)(f.Z.Item,{name:"id",style:{display:"none"},children:(0,h.jsx)(m.Z,{})}),(0,h.jsx)(f.Z.Item,{label:"\u7528\u6237\u540d",name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d!"}],children:(0,h.jsx)(m.Z,{})}),(0,h.jsx)(f.Z.Item,{label:"\u5bc6\u7801",name:"passwd",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}],children:(0,h.jsx)(m.Z.Password,{})}),(0,h.jsx)(f.Z.Item,{name:"permissions",label:"\u6743\u9650",rules:[{required:!0}],children:(0,h.jsxs)(a.Z,{placeholder:"\u8bf7\u9009\u62e9\u65b0\u589e\u7ba1\u7406\u5458\u6743\u9650",allowClear:!0,children:[(0,h.jsx)(x,{value:0,children:"\u666e\u901a\u7ba1\u7406\u5458"}),(0,h.jsx)(x,{value:1,children:"\u8d85\u7ea7\u7ba1\u7406\u5458"})]})})]})}),(0,h.jsxs)(s.Z,{dataSource:t,rowKey:"_id",children:[(0,h.jsx)(g,{title:"\u7f16\u53f7",dataIndex:"id"}),(0,h.jsx)(g,{title:"\u540d\u79f0",dataIndex:"username"}),(0,h.jsx)(g,{title:"\u6743\u9650",render:function(n,e){return e.permissions?"\u7ba1\u7406\u8005":"\u5ba2\u670d"}}),(0,h.jsx)(g,{title:"\u64cd\u4f5c",dataIndex:"",render:function(n,e){return(0,h.jsxs)("div",{children:[(0,h.jsx)(d.Z,{type:"link",onClick:function(){return function(n){_.setFieldsValue(n),k(!0)}(e)},children:"\u4fee\u6539"}),(0,h.jsx)(d.Z,{type:"link",onClick:function(){return function(n){(0,c.jP)(n.id).then((function(e){var r=t.filter((function(e){return e.id!==n.id}));j(r)}))}(e)},children:"\u5220\u9664"})]})}})]})]})}},8402:function(n,e,t){t.d(e,{xq:function(){return j},jP:function(){return w},fH:function(){return Z},Gm:function(){return g},hI:function(){return x},JY:function(){return f},o7:function(){return l},K9:function(){return F},Ig:function(){return s},QZ:function(){return _},Ip:function(){return C},yD:function(){return y},yF:function(){return I},tT:function(){return S},Mc:function(){return P},AA:function(){return A},pk:function(){return a},sV:function(){return b},ps:function(){return v},jy:function(){return k},jg:function(){return K},kT:function(){return H},Oi:function(){return q},dB:function(){return p},GG:function(){return d},ie:function(){return h},fv:function(){return m},GW:function(){return L},Bh:function(){return O},cc:function(){return B},bK:function(){return G}});var r=t(4569),u=t.n(r),i=t(3695),o=u().create({baseURL:"/api/admin",withCredentials:!0});o.interceptors.request.use((function(n){return localStorage.__admin_token&&(n.headers.Authorization="Bearer "+localStorage.__admin_token),localStorage.i18nextLng&&(n.headers["Accept-Language"]=localStorage.i18nextLng),n}),(function(n){return Promise.reject(n)})),o.interceptors.response.use((function(n){return n.data.message&&i.ZP.success(n.data.message),n}),(function(n){return 401===n.response.status&&(localStorage.removeItem("__admin_token"),-1===window.location.pathname.indexOf("login")&&-1===window.location.pathname.indexOf("register")&&(window.location.hash="/login")),n.response.data?(i.ZP.error(n.response.data.message),Promise.reject(n)):Promise.reject(n)}));var c=o,s=function(n){return c.post("/public/login",n)},a=function(n){return c.post("/public/register",n)},f=function(){return c.get("/../common/captcha")},l=function(){return c.get("/info/dashboard")},d=function(){return c.get("/user")},p=function(n){return c.delete("/user/"+n)},m=function(n){return c.get("/wallet/"+n)},h=function(n){return c.post("/wallet",n)},g=function(n){return c.get("/bank/"+n)},x=function(n){return c.post("/bank",n)},j=function(){return c.get("/user/admin")},Z=function(n){return c.post("/user/admin",n)},w=function(n){return c.delete("/user/admin/"+n)},b=function(){return c.get("/rotate")},k=function(n){return c.post("/rotate",n)},v=function(n){return c.delete("/rotate/"+n)},_=function(){return c.get("/post")},y=function(n){return c.post("/post",n)},C=function(n){return c.delete("/post/"+n)},I=function(){return c.get("/product")},P=function(n){return c.post("/product",n)},S=function(n){return c.delete("/product/"+n)},q=function(){return c.get("/transaction")},F=function(){return c.get("/finance")},A=function(){return c.get("/recharge")},G=function(){return c.get("/withdraw")},L=function(n){return c.post("/withdraw",n)},O=function(n){return c.put("/withdraw",n)},B=function(n){return c.delete("/withdraw/"+n)},K=function(n){return c.get("/set/"+n)},H=function(n){return c.post("/set",n)}}}]);
//# sourceMappingURL=790.939784c6.chunk.js.map