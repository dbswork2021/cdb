"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[461],{4461:function(e,n,t){t.r(n);var r=t(3433),i=t(1413),u=t(9439),o=t(2791),c=t(8402),a=t(5595),s=t(3734),l=t(9389),d=t(3272),f=t(3695),p=t(7309),h=t(4997),m=t(9553),g=t(9286),x=t(184),j=a.Z.Column,Z=s.Z.Option,y=l.Z.TextArea;n.default=function(){var e=(0,o.useState)(),n=(0,u.Z)(e,2),t=n[0],_=n[1],k=(0,o.useState)(!1),w=(0,u.Z)(k,2),I=w[0],b=w[1],v=(0,o.useState)(null),C=(0,u.Z)(v,2),A=C[0],S=C[1],P=d.Z.useForm(),F=(0,u.Z)(P,1)[0];(0,o.useEffect)((function(){(0,c.QZ)().then((function(e){_(e.data.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{_id:e._id.slice(0,7),id:e._id,createdAt:e.createdAt.replace(/[TZ]/g," "),updatedAt:e.updatedAt.replace(/[TZ]/g," ")})})))}))}),[]);var T=function(){b(!1),S(null),F.resetFields()};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(p.Z,{type:"primary",className:"bg-blue-600",onClick:function(){return b(!0)},children:"\u53d1\u5e03\u516c\u544a"}),(0,x.jsx)(h.Z,{title:"\u53d1\u5e03\u516c\u544a",centered:!0,visible:I,onCancel:T,width:1e3,keyboard:!1,maskClosable:!1,footer:[],children:(0,x.jsxs)(d.Z,{labelCol:{span:4},form:F,name:"control-hooks",onFinish:function(e){(0,c.yD)((0,i.Z)((0,i.Z)({},e),{},{imageUrl:A})).then((function(e){f.ZP.success("\u4fdd\u5b58\u6210\u529f"),T();var n=t.filter((function(n){return n.id!==e.data._id}));_([].concat((0,r.Z)(n),[(0,i.Z)((0,i.Z)({},e.data),{},{_id:e.data._id.slice(0,7),id:e.data._id})]))}))},children:[(0,x.jsx)(d.Z.Item,{name:"id",style:{display:"none"},children:(0,x.jsx)(l.Z,{})}),(0,x.jsx)(d.Z.Item,{name:"name",label:"\u6807\u9898",rules:[{required:!0}],children:(0,x.jsx)(l.Z,{})}),(0,x.jsx)(d.Z.Item,{name:"category",label:"\u7c7b\u522b",rules:[{required:!0}],children:(0,x.jsxs)(s.Z,{placeholder:"\u8bf7\u9009\u62e9\u516c\u544a\u7c7b\u522b",allowClear:!0,children:[(0,x.jsx)(Z,{value:1,children:"\u65b0\u624b\u5165\u95e8"}),(0,x.jsx)(Z,{value:2,children:"\u6bcf\u65e5\u65e9\u62a5"}),(0,x.jsx)(Z,{value:3,children:"\u4f1a\u5458\u7b54\u7591"}),(0,x.jsx)(Z,{value:4,children:"\u9879\u76ee\u6559\u7a0b"})]})}),(0,x.jsx)(d.Z.Item,{name:"detail",label:"\u8be6\u60c5",children:(0,x.jsx)(y,{rows:4,placeholder:"\u8f93\u5165\u516c\u544a\u5185\u5bb9"})}),(0,x.jsx)(d.Z.Item,{label:"\u7f29\u7565\u56fe",children:(0,x.jsx)(m.Z,{style:{display:"flex",justifyContent:"center",alignItems:"center"},name:"file",action:"/api/common/uploads",headers:localStorage.getItem("__admin_token")?{Authorization:"Bearer ".concat(localStorage.__admin_token)}:null,showUploadList:!1,onChange:function(e){"done"===e.file.status?(f.ZP.success("\u6587\u4ef6\u4e0a\u4f20\u6210\u529f"),S(e.file.response)):"error"===e.file.status&&f.ZP.error("\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25")},children:A?(0,x.jsx)("img",{src:"/uploads/"+A,alt:"avatar",style:{width:"18rem",height:"6rem"}}):(0,x.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"6rem",height:"6rem"},children:(0,x.jsx)(g.Z,{})})})}),(0,x.jsx)(d.Z.Item,{wrapperCol:{span:4,offset:4},children:(0,x.jsx)(p.Z,{type:"link",htmlType:"submit",children:"\u4fdd\u5b58"})})]})}),(0,x.jsxs)(a.Z,{dataSource:t,rowKey:"id",children:[(0,x.jsx)(j,{title:"ID",dataIndex:"_id"}),(0,x.jsx)(j,{title:"\u6807\u9898",dataIndex:"name"}),(0,x.jsx)(j,{title:"\u7c7b\u522b",dataIndex:"category",render:function(e,n){return(0,x.jsxs)(x.Fragment,{children:[1===n.category?(0,x.jsx)("p",{children:"\u65b0\u624b\u5165\u95e8"}):null,2===n.category?(0,x.jsx)("p",{children:"\u6bcf\u65e5\u65e9\u62a5"}):null,3===n.category?(0,x.jsx)("p",{children:"\u4f1a\u5458\u7b54\u7591"}):null,4===n.category?(0,x.jsx)("p",{children:"\u9879\u76ee\u6559\u7a0b"}):null]})}}),(0,x.jsx)(j,{title:"\u6dfb\u52a0\u65f6\u95f4",dataIndex:"createdAt"}),(0,x.jsx)(j,{title:"\u6700\u540e\u4fee\u6539\u65f6\u95f4",dataIndex:"updatedAt"}),(0,x.jsx)(j,{title:"\u64cd\u4f5c",dataIndex:"",render:function(e,n){return(0,x.jsxs)("div",{className:"flex gap-1",children:[(0,x.jsx)(p.Z,{type:"link",onClick:function(){return function(e){F.setFieldsValue(e),S(e.imageUrl),b(!0)}(n)},children:"\u4fee\u6539"}),(0,x.jsx)(p.Z,{type:"link",onClick:function(){return function(e){(0,c.Ip)(e.id).then((function(n){var r=t.filter((function(n){return n.id!==e.id}));_(r)}))}(n)},children:"\u5220\u9664"})]})}})]})]})}},8402:function(e,n,t){t.d(n,{c6:function(){return I},t$:function(){return b},xq:function(){return m},jP:function(){return x},fH:function(){return g},JY:function(){return l},ws:function(){return v},Fi:function(){return C},o7:function(){return d},K9:function(){return q},Ig:function(){return a},QZ:function(){return _},Ip:function(){return w},yD:function(){return k},yF:function(){return P},tT:function(){return T},Mc:function(){return F},AA:function(){return U},tu:function(){return L},pk:function(){return s},sV:function(){return j},ps:function(){return y},jy:function(){return Z},jg:function(){return B},kT:function(){return D},kP:function(){return A},_2:function(){return S},dB:function(){return p},tN:function(){return h},GG:function(){return f}});var r=t(4569),i=t.n(r),u=t(3695),o=i().create({baseURL:"/api/admin",withCredentials:!0});o.interceptors.request.use((function(e){return localStorage.__admin_token&&(e.headers.Authorization="Bearer "+localStorage.__admin_token),localStorage.i18nextLng&&(e.headers["Accept-Language"]=localStorage.i18nextLng),e}),(function(e){return Promise.reject(e)})),o.interceptors.response.use((function(e){return e.data.message&&u.ZP.success(e.data.message),e}),(function(e){return 401===e.response.status&&(localStorage.removeItem("__admin_token"),-1===window.location.pathname.indexOf("login")&&-1===window.location.pathname.indexOf("register")&&(window.location.hash="/login")),e.response.data?(u.ZP.error(e.response.data.message),Promise.reject(e)):Promise.reject(e)}));var c=o,a=function(e){return c.post("/login",e)},s=function(e){return c.post("/register",e)},l=function(){return c.get("/../common/captcha")},d=function(){return c.get("/info/dashboard")},f=function(){return c.get("/user/list")},p=function(e){return c.get("/user/user/"+e)},h=function(e){return c.post("/user/user",e)},m=function(){return c.get("/user/admin")},g=function(e){return c.post("/user/admin",e)},x=function(e){return c.delete("/user/admin/"+e)},j=function(){return c.get("/info/rotate")},Z=function(e){return c.post("/info/rotate",e)},y=function(e){return c.delete("/info/rotate/"+e)},_=function(){return c.get("/info/post")},k=function(e){return c.post("/info/post",e)},w=function(e){return c.delete("/info/post/"+e)},I=function(){return c.get("/info/about")},b=function(e){return c.post("/info/about",e)},v=function(){return c.get("/info/center")},C=function(e){return c.post("/info/center",e)},A=function(){return c.get("/info/share")},S=function(e){return c.post("/info/share",e)},P=function(){return c.get("/product")},F=function(e){return c.post("/product",e)},T=function(e){return c.delete("/product/"+e)},L=function(){return c.get("/product/record")},q=function(){return c.get("/price/financial")},U=function(){return c.get("/price/rechage")},B=function(e){return c.get("/set/"+e)},D=function(e){return c.post("/set",e)}}}]);
//# sourceMappingURL=461.804c0990.chunk.js.map