{"version":3,"file":"static/js/717.83f7189f.chunk.js","mappings":"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","sources":["component/web/PostCard.jsx","pages/index/Post.jsx","utils/http.js","utils/webApi.js"],"sourcesContent":["import { useEffect } from \"react\"\nimport { useTranslation } from \"react-i18next\"\nimport { useNavigate } from \"react-router-dom\"\n\nconst PostCard = ({item}) => {\nconst navigate = useNavigate()\n\tconst {t} = useTranslation()\n\t\n\treturn (\n\t\t<div className=\"m-4 shadow-gray-300 shadow-xl  rounded-lg\" onClick={() => navigate('/post/' + item._id )}>\n\t\t\t<img src={item.imageUrl} alt=\"\" className=\"h-24 bg-red-300 mb-2 rounded-t-lg\" />\n\t\t\t<div className='p-2'>\n\t\t\t\t<div className=''>\n\t\t\t\t\t{item.name}\n\t\t\t\t</div>\n\t\t\t\t\t<div className='flex justify-between text-sm text-gray-400'>\n\t\t\t\t\t\t<p className=''>\n\t\t\t\t\t\t\t{item.createdAt}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p className=''>\n\t\t\t\t\t\t\t{t('read_count')}：{item.readCount}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default PostCard\n","import PostCard from 'component/web/PostCard';\nimport { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { WebPostApi, WebPostReadApi } from 'utils/webApi';\n\nconst Post = () => {\n  const [postList, setPostList] = useState([]);\n  const { id } = useParams();\n\tconst [currentPost, setCurrentPost] = useState(null)\n\n  useEffect(() => {\n    localStorage.setItem('navBar', 'person');\n    WebPostApi().then((res) => {\n      setPostList(\n        res.data.map((item) => ({\n          ...item,\n          imageUrl: process.env.REACT_APP_SERVER + item.imageUrl,\n          createdAt: item.createdAt.replace(/[TZ]/g, ''),\n        }))\n      );\n    });\n  }, []);\n\n  useEffect(() => {\n\t\tif(id !== undefined){\n    const currentIndex = postList.findIndex((post) => post._id === id)\n\t\t\tsetCurrentPost(postList[currentIndex].detail)\n    WebPostReadApi(id);\n\t\t}\n  }, [id]);\n\n  return (\n    <div>\n      {id\n        ? (\n\t\t\t\t<div className='m-4'>\n\t\t\t\t\t\t<div className='w-full font-bold text-center mb-4 pb-4  border-solid border-b-2'>\n\t\t\t\t\t\t\t公告详情\n\t\t\t\t\t\t</div>\n        {currentPost}\t\n        </div>\n\t\t\t\t)\n        : postList.map((item) => <PostCard key={item._id} item={item} />)}\n    </div>\n  );\n};\n\nexport default Post;\n","import Axios from 'axios';\nimport { toast } from 'react-toastify';\n\nconst http = Axios.create({\n  baseURL: process.env.REACT_APP_API_SERVER,\n  withCredentials: true,\n});\n\nhttp.interceptors.request.use(\n  (config) => {\n    if (localStorage.__web_token) {\n      config.headers.Authorization = 'Bearer ' + localStorage.__web_token;\n    }\n    if (localStorage.i18nextLng) {\n      config.headers['Accept-Language'] = localStorage.i18nextLng;\n    }\n    return config;\n  },\n  (err) => {\n    return Promise.reject(err);\n  }\n);\n\nhttp.interceptors.response.use(\n  (res) => {\n    if (res.data.message) {\n      toast.success(res.data.message);\n    }\n    return res;\n  },\n  (err) => {\n\t\t\n\t\t\n    if (err.response.status === 401) {\n      localStorage.removeItem('__web_token');\n\t\t\t\n      if (\n        window.location.pathname.indexOf('login') === -1 && \n\t\t\t\t\twindow.location.pathname.indexOf('register') === -1\n\t\t\t) {\n        window.location.hash = '/login';\n      }\n    }\n\n    if (err.response.data) {\n      toast.error(err.response.data.message);\n      return Promise.reject(err);\n    }\n    return Promise.reject(err);\n  }\n);\n\nexport default http;\n","import http from './http'\n\nexport const RegisterApi = (model) => http.post('/web/register', model)\nexport const LoginApi = (model) => http.post('/web/login', model)\nexport const WebHomeApi = () => http.get('/web/Index')\n\nexport const PersonApi = () => http.get('/web/user/center')\nexport const WalletApi = () => http.get('/web/user/wallet')\n\nexport const WebAboutApi = () => http.get('/web/info/about')\nexport const WebPostApi = () => http.get('/web/info/post')\nexport const WebPostReadApi = (id) => http.delete('/web/info/post/' + id)\nexport const WebShareApi = () => http.get('/web/info/share')\n\nexport const WebBuyApi = (model) => http.post('/web/product/buy', model)\nexport const WebDepotApi = () => http.get('/web/product/depot')\n"],"names":["item","navigate","useNavigate","t","useTranslation","className","onClick","_id","src","imageUrl","alt","name","createdAt","readCount","useState","postList","setPostList","id","useParams","currentPost","setCurrentPost","useEffect","localStorage","setItem","WebPostApi","then","res","data","map","process","replace","undefined","currentIndex","findIndex","post","detail","WebPostReadApi","http","Axios","baseURL","withCredentials","interceptors","request","use","config","__web_token","headers","Authorization","i18nextLng","err","Promise","reject","response","message","toast","status","removeItem","window","location","pathname","indexOf","hash","RegisterApi","model","LoginApi","WebHomeApi","PersonApi","WalletApi","WebAboutApi","WebShareApi","WebBuyApi","WebDepotApi"],"sourceRoot":""}