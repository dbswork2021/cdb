{"version":3,"file":"static/js/531.9673b3b2.chunk.js","mappings":"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","sources":["pages/admin/Rotate.jsx","utils/adminApi.js","utils/http.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { RostateApi, RostateSaveApi, RostateDelApi } from '../../utils/adminApi';\nimport { Table, Button, Modal, Upload, message } from 'antd';\nimport { PlusOutlined } from '@ant-design/icons';\nconst { Column } = Table;\n\nconst Rotate = () => {\n  const [tableData, setTableData] = useState();\n  const [visible, setVisible] = useState(false);\n  const [imageUrl, setImageUrl] = useState(null);\n\n  useEffect(() => {\n    RostateApi().then((res) => {\n      setTableData(\n        res.data.map((item) => ({\n          ...item,\n          _id: item._id.slice(0, 7),\n\t\t\t\t\tid: item._id\n        }))\n      );\n    });\n  }, []);\n\n  const del = (record) => {\n\t\tRostateDelApi(record.id).then((res) => {\n\t\t\tconst newTableData = tableData.filter((item) => item.id !== record.id)\n\t\t\tsetTableData(newTableData)\n\t\t})\n\t};\n\n  const onChange = (info) => {\n    if (info.file.status === 'done') {\n      message.success('文件上传成功');\n\t\t\tsetImageUrl(info.file.response)\n    } else if (info.file.status === 'error') {\n      message.error('文件上传失败');\n    }\n  };\n\n\tconst onOk = () => {\n\t\tRostateSaveApi({imageUrl}).then((res)=>{\n\t\t\tmessage.success(\"添加成功\")\n\t\t\tonCancel()\n\t\t\tsetTableData([\n\t\t\t\t...tableData,\n\t\t\t\t{\n\t\t\t\t\t_id: res.data._id.slice(0,7),\n\t\t\t\t\tid: res.data._id,\n\t\t\t\t\timgUrl: res.data.imgUrl\n\t\t\t\t}\n\t\t\t])\n\t\t})\n\t}\n\n\tconst onCancel = () => {\n\t\tsetVisible(false)\n\t\tsetImageUrl(null)\n\t}\n  return (\n    <>\n      <Button\n        type=\"primary\"\n        className=\"bg-blue-600\"\n        onClick={() => setVisible(true)}\n      >\n        添加横幅\n      </Button>\n      <Modal\n        title=\"添加首页横幅\"\n        centered\n        visible={visible}\n        onOk={onOk}\n        onCancel={onCancel}\n        width={1000}\n        okButtonProps={{ type: 'primary' }}\n        cancelButtonProps={{ danger: true, type: 'primary' }}\n        okText=\"确认\"\n        cancelText=\"取消\"\n        closable={false}\n        keyboard={false}\n        maskClosable={false}\n      >\n        <Upload\n          className=\"flex justify-center items-center\"\n          name=\"file\"\n          action={process.env.REACT_APP_UPLOAD_SERVER}\n\t\t\t\t\theaders={\n\t\t\t\t\tlocalStorage.getItem('__web_token')?{Authorization: `Bearer ${localStorage.__web_token}`}:null\n\n\t\t\t\t\t}\n          showUploadList={false}\n          onChange={onChange}\n        >\n          {imageUrl ? (\n            <img src={process.env.REACT_APP_SERVER + imageUrl} alt=\"avatar\" className=\" w-72 h-24 bg-red-400\" />\n          ) : (\n            <div className=\"flex justify-center items-center w-72 h-24 bg-red-400\">\n              <PlusOutlined />\n              <div style={{ marginTop: 8 }}>Upload</div>\n            </div>\n          )}\n        </Upload>\n      </Modal>\n      <Table dataSource={tableData} rowKey=\"id\">\n        <Column title=\"编号\" dataIndex=\"_id\" />\n        <Column\n          title=\"缩略图\"\n          dataIndex=\"imgUrl\"\n          render={(_, record) => <img src={process.env.REACT_APP_SERVER + record.imgUrl} alt='img' className=\"w-48 h-24 bg-red-400\" />}\n        />\n        <Column\n          title=\"操作\"\n          dataIndex=\"\"\n          render={(_, record) => (\n            <div className=\"flex gap-1\">\n              <Button danger onClick={() => del(record)}>\n                删除\n              </Button>\n            </div>\n          )}\n        />\n      </Table>\n    </>\n  );\n};\n\nexport default Rotate;\n","import http from './http'\n\n\nexport const LoginApi = (model) => http.post('/admin/login', model)\nexport const RegisterApi = (model) => http.post('/admin/register', model)\nexport const CaptchaApi = () => http.get('/common/captcha')\n\nexport const DashBoardApi = () => http.get('/admin/info/dashboard')\n\nexport const UserListApi = () => http.get('/admin/user/list')\nexport const UserBanApi = (id) => http.get('/admin/user/' + id)\nexport const UserEditApi = (model) => http.post('/admin/user', model)\nexport const UserDelApi = (id) => http.delete('/admin/user/' + id)\n\nexport const RostateApi = () => http.get('/admin/info/rotate')\nexport const RostateSaveApi = (model) => http.post('/admin/info/rotate', model)\nexport const RostateDelApi = (id) => http.delete('/admin/info/rotate/' + id)\n\nexport const PostApi = () => http.get('/admin/info/post')\nexport const PostSaveApi = (model) => http.post('/admin/info/post', model)\nexport const PostDelApi = (id) => http.delete('/admin/info/post/' + id)\n\nexport const AboutApi = () => http.get('/admin/info/about')\nexport const AboutSaveApi = (model) => http.post('/admin/info/about', model)\n\nexport const CenterApi = () => http.get('/admin/info/center')\nexport const CenterSaveApi = (model) => http.post('/admin/info/center', model)\n\nexport const ShareApi = () => http.get('/admin/info/share')\nexport const ShareSaveApi = (model) => http.post('/admin/info/share', model)\n\nexport const ProductApi = () => http.get('/admin/product')\nexport const ProductSaveApi = (model) => http.post('/admin/product', model)\nexport const ProductDelApi = (id) => http.delete('/admin/product/' + id)\n\nexport const RecordApi = () => http.get('/admin/product/record')\n\nexport const FinancialApi = () => http.get('/admin/price/financial')\n","import Axios from 'axios';\nimport { toast } from 'react-toastify';\n\nconst http = Axios.create({\n  baseURL: process.env.REACT_APP_API_SERVER,\n  withCredentials: true,\n});\n\nhttp.interceptors.request.use(\n  (config) => {\n    if (localStorage.__web_token) {\n      config.headers.Authorization = 'Bearer ' + localStorage.__web_token;\n    }\n    if (localStorage.i18nextLng) {\n      config.headers['Accept-Language'] = localStorage.i18nextLng;\n    }\n    return config;\n  },\n  (err) => {\n    return Promise.reject(err);\n  }\n);\n\nhttp.interceptors.response.use(\n  (res) => {\n    if (res.data.message) {\n      toast.success(res.data.message);\n    }\n    return res;\n  },\n  (err) => {\n\t\t\n\t\t\n    if (err.response.status === 401) {\n      localStorage.removeItem('__web_token');\n\t\t\t\n      if (\n        window.location.pathname.indexOf('login') === -1 && \n\t\t\t\t\twindow.location.pathname.indexOf('register') === -1\n\t\t\t) {\n        window.location.hash = '/login';\n      }\n    }\n\n    if (err.response.data) {\n      toast.error(err.response.data.message);\n      return Promise.reject(err);\n    }\n    return Promise.reject(err);\n  }\n);\n\nexport default http;\n"],"names":["Column","Table","useState","tableData","setTableData","visible","setVisible","imageUrl","setImageUrl","useEffect","RostateApi","then","res","data","map","item","_id","slice","id","onCancel","type","className","onClick","title","centered","onOk","RostateSaveApi","message","imgUrl","width","okButtonProps","cancelButtonProps","danger","okText","cancelText","closable","keyboard","maskClosable","name","action","process","headers","localStorage","getItem","Authorization","__web_token","showUploadList","onChange","info","file","status","response","src","alt","style","marginTop","dataSource","rowKey","dataIndex","render","_","record","RostateDelApi","newTableData","filter","del","LoginApi","model","http","RegisterApi","CaptchaApi","DashBoardApi","UserListApi","UserBanApi","UserEditApi","UserDelApi","PostApi","PostSaveApi","PostDelApi","AboutApi","AboutSaveApi","CenterApi","CenterSaveApi","ShareApi","ShareSaveApi","ProductApi","ProductSaveApi","ProductDelApi","RecordApi","FinancialApi","Axios","baseURL","withCredentials","interceptors","request","use","config","i18nextLng","err","Promise","reject","toast","removeItem","window","location","pathname","indexOf","hash"],"sourceRoot":""}