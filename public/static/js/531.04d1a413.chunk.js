"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[531],{2531:function(n,e,t){t.r(e);var r=t(3433),i=t(1413),o=t(9439),u=t(2791),a=t(6074),c=t(5595),s=t(3695),d=t(7309),l=t(4997),f=t(9553),m=t(9286),g=t(184),p=c.Z.Column;e.default=function(){var n=(0,u.useState)(),e=(0,o.Z)(n,2),t=e[0],Z=e[1],h=(0,u.useState)(!1),x=(0,o.Z)(h,2),j=x[0],b=x[1],w=(0,u.useState)(null),_=(0,o.Z)(w,2),k=_[0],y=_[1];(0,u.useEffect)((function(){(0,a.sV)().then((function(n){Z(n.data.map((function(n){return(0,i.Z)((0,i.Z)({},n),{},{_id:n._id.slice(0,7),id:n._id})})))}))}),[]);var v=function(){b(!1),y(null)};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.Z,{type:"primary",className:"bg-blue-600",onClick:function(){return b(!0)},children:"\u6dfb\u52a0\u6a2a\u5e45"}),(0,g.jsx)(l.Z,{title:"\u6dfb\u52a0\u9996\u9875\u6a2a\u5e45",centered:!0,visible:j,onOk:function(){(0,a.jy)({imageUrl:k}).then((function(n){s.ZP.success("\u6dfb\u52a0\u6210\u529f"),v(),Z([].concat((0,r.Z)(t),[{_id:n.data._id.slice(0,7),id:n.data._id,imgUrl:n.data.imgUrl}]))}))},onCancel:v,width:1e3,okButtonProps:{type:"primary"},cancelButtonProps:{danger:!0,type:"primary"},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",closable:!1,keyboard:!1,maskClosable:!1,children:(0,g.jsx)(f.Z,{className:"flex justify-center items-center",name:"file",action:"/api/common/uploads",headers:localStorage.getItem("__web_token")?{Authorization:"Bearer ".concat(localStorage.__web_token)}:null,showUploadList:!1,onChange:function(n){"done"===n.file.status?(s.ZP.success("\u6587\u4ef6\u4e0a\u4f20\u6210\u529f"),y(n.file.response)):"error"===n.file.status&&s.ZP.error("\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25")},children:k?(0,g.jsx)("img",{src:"/"+k,alt:"avatar",className:" w-72 h-24 bg-red-400"}):(0,g.jsxs)("div",{className:"flex justify-center items-center w-72 h-24 bg-red-400",children:[(0,g.jsx)(m.Z,{}),(0,g.jsx)("div",{style:{marginTop:8},children:"Upload"})]})})}),(0,g.jsxs)(c.Z,{dataSource:t,rowKey:"id",children:[(0,g.jsx)(p,{title:"\u7f16\u53f7",dataIndex:"_id"}),(0,g.jsx)(p,{title:"\u7f29\u7565\u56fe",dataIndex:"imgUrl",render:function(n,e){return(0,g.jsx)("img",{src:"/"+e.imgUrl,alt:"img",className:"w-48 h-24 bg-red-400"})}}),(0,g.jsx)(p,{title:"\u64cd\u4f5c",dataIndex:"",render:function(n,e){return(0,g.jsx)("div",{className:"flex gap-1",children:(0,g.jsx)(d.Z,{danger:!0,onClick:function(){return function(n){(0,a.ps)(n.id).then((function(e){var r=t.filter((function(e){return e.id!==n.id}));Z(r)}))}(e)},children:"\u5220\u9664"})})}})]})]})}},6074:function(n,e,t){t.d(e,{GG:function(){return c},Ig:function(){return i},JY:function(){return u},Mc:function(){return w},QZ:function(){return p},c6:function(){return x},dB:function(){return s},g4:function(){return l},jP:function(){return h},jy:function(){return m},o7:function(){return a},pk:function(){return o},ps:function(){return g},sV:function(){return f},t$:function(){return j},tN:function(){return d},tT:function(){return _},yD:function(){return Z},yF:function(){return b}});var r=t(129),i=function(n){return r.Z.post("/admin/login",n)},o=function(n){return r.Z.post("/admin/register",n)},u=function(){return r.Z.get("/common/captcha")},a=function(){return r.Z.get("/admin/info/dashboard")},c=function(){return r.Z.get("/admin/user/list")},s=function(n){return r.Z.get("/admin/user/"+n)},d=function(n){return r.Z.post("/admin/user",n)},l=function(n){return r.Z.delete("/admin/user/"+n)},f=function(){return r.Z.get("/admin/info/rotate")},m=function(n){return r.Z.post("/admin/info/rotate",n)},g=function(n){return r.Z.delete("/admin/info/rotate/"+n)},p=function(){return r.Z.get("/admin/info/post")},Z=function(n){return r.Z.post("/admin/info/post",n)},h=function(n){return r.Z.delete("/admin/info/post/"+n)},x=function(){return r.Z.get("/admin/info/about")},j=function(n){return r.Z.post("/admin/info/about",n)},b=function(){return r.Z.get("/admin/product")},w=function(n){return r.Z.post("/admin/product",n)},_=function(n){return r.Z.delete("/admin/product/"+n)}},129:function(n,e,t){var r=t(4569),i=t.n(r),o=t(577),u=i().create({baseURL:"/api",withCredentials:!0});u.interceptors.request.use((function(n){return localStorage.__web_token&&(n.headers.Authorization="Bearer "+localStorage.__web_token),localStorage.i18nextLng&&(n.headers["Accept-Language"]=localStorage.i18nextLng),n}),(function(n){return Promise.reject(n)})),u.interceptors.response.use((function(n){return n.data.message&&o.Am.success(n.data.message),n}),(function(n){return 401===n.response.status&&(localStorage.removeItem("__web_token"),-1===window.location.pathname.indexOf("login")&&-1===window.location.pathname.indexOf("register")&&(window.location.hash="/login")),n.response.data?(console.log(n.response.data),o.Am.error(n.response.data.message),Promise.reject(n)):Promise.reject(n)})),e.Z=u}}]);
//# sourceMappingURL=531.04d1a413.chunk.js.map