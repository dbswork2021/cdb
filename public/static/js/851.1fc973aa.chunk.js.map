{"version":3,"file":"static/js/851.1fc973aa.chunk.js","mappings":"6MAoFA,UA7Ec,WACZ,IAAMA,GAAWC,EAAAA,EAAAA,MACXC,GAAKC,EAAAA,EAAAA,KAALD,EACP,GAAgCE,EAAAA,EAAAA,UAAS,CACxCC,MAAO,GACPC,OAAQ,KAFT,eAAOC,EAAP,KAAiBC,EAAjB,MAKAC,EAAAA,EAAAA,YAAU,WACTC,aAAaC,WAAW,iBACvB,IAEF,IAAMC,EAAc,SAACC,GACC,UAAlBA,EAAEC,OAAOC,KACRF,EAAEC,OAAOE,MAAMC,QAAU,IAC3BT,GAAY,kBAAID,GAAL,cAAgBM,EAAEC,OAAOC,KAAOF,EAAEC,OAAOE,MAAME,QAAQ,WAAW,OAG9EV,GAAY,kBAAID,GAAL,cAAgBM,EAAEC,OAAOC,KAAOF,EAAEC,OAAOE,UAYrD,OACE,iBAAKG,UAAU,wEAAf,WACE,gBAAKA,UAAU,kHAAf,mBAGA,iBAAKA,UAAU,qEAAf,WACE,SAAC,MAAD,CAAQA,UAAU,eAClB,kBACEA,UAAU,sBACVC,KAAK,OACVL,KAAK,QACLC,MAAOT,EAASF,MACXgB,YAAanB,EAAE,gBACpBoB,SAAUV,QAIT,iBAAKO,UAAU,mEAAf,WACE,SAAC,MAAD,CAAoBA,UAAU,eAC9B,kBACEC,KAAK,WACVL,KAAK,SACLC,MAAOT,EAASD,OACXa,UAAU,sBACVE,YAAanB,EAAE,aACpBoB,SAAUV,QAIT,mBACEO,UAAU,kEACVI,QAtCc,SAACV,GACnBA,EAAEW,kBACJC,EAAAA,EAAAA,IAASlB,GAAUmB,MAAK,SAACC,GACxBjB,aAAakB,QAAQ,cAAeD,EAAIE,KAAKC,OAC7C9B,EAAS,eAgCN,SAIGE,EAAE,gBAEL,mBACEiB,UAAU,qEACVI,QAAS,WACPvB,EAAS,cAHb,SAMGE,EAAE,kB,oDC3EL6B,EAAOC,IAAAA,OAAa,CACxBC,QAASC,OACTC,iBAAiB,IAGnBJ,EAAKK,aAAaC,QAAQC,KACxB,SAACC,GAOC,OANI7B,aAAa8B,cACfD,EAAOE,QAAQC,cAAgB,UAAYhC,aAAa8B,aAEtD9B,aAAaiC,aACfJ,EAAOE,QAAQ,mBAAqB/B,aAAaiC,YAE5CJ,KAET,SAACK,GACC,OAAOC,QAAQC,OAAOF,MAI1Bb,EAAKK,aAAaW,SAAST,KACzB,SAACX,GAIC,OAHIA,EAAIE,KAAKmB,SACXC,EAAAA,GAAAA,QAActB,EAAIE,KAAKmB,SAElBrB,KAET,SAACiB,GAcC,OAX4B,MAAxBA,EAAIG,SAASG,SACfxC,aAAaC,WAAW,gBAGyB,IAA/CwC,OAAOC,SAASC,SAASC,QAAQ,WACc,IAAlDH,OAAOC,SAASC,SAASC,QAAQ,cAE9BH,OAAOC,SAASG,KAAO,WAIvBX,EAAIG,SAASlB,MACf2B,QAAQC,IAAIb,EAAIG,SAASlB,MAEzBoB,EAAAA,GAAAA,MAAYL,EAAIG,SAASlB,KAAKmB,SACvBH,QAAQC,OAAOF,IAEjBC,QAAQC,OAAOF,MAI1B,O,2OCpDac,EAAc,SAACC,GAAD,OAAW5B,EAAAA,EAAAA,KAAU,gBAAiB4B,IACpDlC,EAAW,SAACkC,GAAD,OAAW5B,EAAAA,EAAAA,KAAU,aAAc4B,IAC9CC,EAAa,kBAAM7B,EAAAA,EAAAA,IAAS,eAE5B8B,EAAY,kBAAM9B,EAAAA,EAAAA,IAAS,qBAE3B+B,EAAc,kBAAM/B,EAAAA,EAAAA,IAAS,oBAC7BgC,EAAa,kBAAMhC,EAAAA,EAAAA,IAAS,mBAC5BiC,EAAiB,SAACC,GAAD,OAAQlC,EAAAA,EAAAA,OAAY,kBAAoBkC,IACzDC,EAAc,kBAAMnC,EAAAA,EAAAA,IAAS","sources":["pages/index/Login.jsx","utils/http.js","utils/webApi.js"],"sourcesContent":["import {useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { BiUser } from 'react-icons/bi';\nimport { RiLockPasswordLine } from 'react-icons/ri';\nimport { useNavigate } from 'react-router-dom';\nimport {LoginApi} from 'utils/webApi'\n\nconst Login = () => {\n  const navigate = useNavigate();\n\tconst {t} = useTranslation()\n\tconst [userForm, setUserForm] = useState({\n\t\tphone: '',\n\t\tpasswd: '',\n\t})\n\t\n\tuseEffect(() => {\n\t\tlocalStorage.removeItem('__web_token')\n\t},[])\n\n\tconst handleInput = (e) => {\n\t\tif(e.target.name === 'phone'){\n\t\t\tif(e.target.value.length <= 11){\n\t\t\t\tsetUserForm({...userForm, [e.target.name]: e.target.value.replace(/[^0-9]/ig,'')})\n\t\t\t}\n\t\t}else{\n\t\t\tsetUserForm({...userForm, [e.target.name]: e.target.value})\n\t\t}\n\n\t}\n\n  const handleClick = (e) => {\n    e.preventDefault();\n\t\tLoginApi(userForm).then((res)=> {\n\t\t\tlocalStorage.setItem('__web_token', res.data.token)\n\t\t\tnavigate('/person')\n\t\t})\n  };\n  return (\n    <div className=\"h-screen flex flex-col justify-center items-center  gap-4 bg-teal-300\">\n      <div className=\"w-24 h-24 rounded-full shadow flex justify-center items-center border-2 border-solid border-orange-500 bg-white\">\n        logo\n      </div>\n      <div className=\"flex  w-11/12 h-10 rounded-md bg-white justify-start items-center \">\n        <BiUser className=\"ml-2 mr-2\" />\n        <input\n          className=\"outline-none w-full\"\n          type=\"text\"\n\t\t\t\t\tname='phone'\n\t\t\t\t\tvalue={userForm.phone}\n          placeholder={t('phone_number')}\n\t\t\t\t\tonChange={handleInput}\n        ></input>\n      </div>\n\n      <div className=\"flex bg-white justify-start items-center w-11/12 h-10 rounded-md\">\n        <RiLockPasswordLine className=\"ml-2 mr-2\" />\n        <input\n          type=\"password\"\n\t\t\t\t\tname='passwd'\n\t\t\t\t\tvalue={userForm.passwd}\n          className=\"w-full outline-none\"\n          placeholder={t('login_pwd')}\n\t\t\t\t\tonChange={handleInput}\n        ></input>\n      </div>\n\n      <button\n        className=\"w-10/12 h-12 rounded-xl bg-white mt-4 font-bold text-orange-600\"\n        onClick={handleClick}\n      >\n        {t('login_now')}\n      </button>\n      <button\n        className=\"w-10/12 h-12 rounded-xl border-2 border-solid font-bold text-white\"\n        onClick={() => {\n          navigate('/register');\n        }}\n      >\n        {t('reg_now')}\n      </button>\n    </div>\n  );\n};\n\nexport default Login;\n","import Axios from 'axios';\nimport { toast } from 'react-toastify';\n\nconst http = Axios.create({\n  baseURL: process.env.REACT_APP_API_SERVER,\n  withCredentials: true,\n});\n\nhttp.interceptors.request.use(\n  (config) => {\n    if (localStorage.__web_token) {\n      config.headers.Authorization = 'Bearer ' + localStorage.__web_token;\n    }\n    if (localStorage.i18nextLng) {\n      config.headers['Accept-Language'] = localStorage.i18nextLng;\n    }\n    return config;\n  },\n  (err) => {\n    return Promise.reject(err);\n  }\n);\n\nhttp.interceptors.response.use(\n  (res) => {\n    if (res.data.message) {\n      toast.success(res.data.message);\n    }\n    return res;\n  },\n  (err) => {\n\t\t\n\t\t\n    if (err.response.status === 401) {\n      localStorage.removeItem('__web_token');\n\t\t\t\n      if (\n        window.location.pathname.indexOf('login') === -1 && \n\t\t\t\t\twindow.location.pathname.indexOf('register') === -1\n\t\t\t) {\n        window.location.hash = '/login';\n      }\n    }\n\n    if (err.response.data) {\n      console.log(err.response.data);\n\n      toast.error(err.response.data.message);\n      return Promise.reject(err);\n    }\n    return Promise.reject(err);\n  }\n);\n\nexport default http;\n","import http from './http'\n\nexport const RegisterApi = (model) => http.post('/web/register', model)\nexport const LoginApi = (model) => http.post('/web/login', model)\nexport const WebHomeApi = () => http.get('/web/Index')\n\nexport const PersonApi = () => http.get('/web/user/center')\n\nexport const WebAboutApi = () => http.get('/web/info/about')\nexport const WebPostApi = () => http.get('/web/info/post')\nexport const WebPostReadApi = (id) => http.delete('/web/info/post/' + id)\nexport const WebShareApi = () => http.get('/web/info/share')\n"],"names":["navigate","useNavigate","t","useTranslation","useState","phone","passwd","userForm","setUserForm","useEffect","localStorage","removeItem","handleInput","e","target","name","value","length","replace","className","type","placeholder","onChange","onClick","preventDefault","LoginApi","then","res","setItem","data","token","http","Axios","baseURL","process","withCredentials","interceptors","request","use","config","__web_token","headers","Authorization","i18nextLng","err","Promise","reject","response","message","toast","status","window","location","pathname","indexOf","hash","console","log","RegisterApi","model","WebHomeApi","PersonApi","WebAboutApi","WebPostApi","WebPostReadApi","id","WebShareApi"],"sourceRoot":""}