{"version":3,"file":"static/js/361.3c7acb70.chunk.js","mappings":"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","sources":["pages/admin/Login.jsx","utils/adminApi.js","utils/http.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { BiUser } from 'react-icons/bi';\nimport { RiLockPasswordLine } from 'react-icons/ri';\nimport { CaptchaApi, LoginApi } from 'utils/adminApi';\nimport { toast } from 'react-toastify';\nimport { useNavigate } from 'react-router-dom';\n\nconst Login = () => {\n  const [captchaCode, setCaptchaCode] = useState(null);\n  const [loginForm, setLoginForm] = useState({\n    username: '',\n    passwd: '',\n    captchaCode: '',\n  });\n  const navigate = useNavigate();\n\n  useEffect(() => {\n\t\tgetCaptcha()\n  }, []);\n\n\tconst getCaptcha = () => {\n    CaptchaApi().then((res) => {\n      setCaptchaCode(res.data.svg);\n\t\t\tlocalStorage.setItem('__web_token', res.data.token)\n    });\n\t}\n\n  const handleClick = (e) => {\n    e.preventDefault();\n    if (\n      loginForm.captchaCode !== '' &&\n      loginForm.username !== '' &&\n      loginForm.passwd !== ''\n    ) {\n      LoginApi(loginForm)\n        .then((res) => {\n          localStorage.setItem('__web_token', res.data.token);\n          navigate('/admin');\n        })\n        .catch(() => {\n\t\t\t\t\tgetCaptcha()\n        });\n    } else {\n      toast.error('请输入帐号密码及验证码');\n    }\n  };\n\n  const handleInput = (e) => {\n    setLoginForm({ ...loginForm, [e.target.name]: e.target.value });\n  };\n\n  return (\n    <div className=\"h-screen flex justify-center bg-slate-500 p-24\">\n      <div className=\"w-2/6 h-96 flex flex-col bg-zinc-50 p-8 gap-4\">\n        <div className=\"w-full h-8 leading-8 text-center   font-bold text-3xl\">\n          后台管理系统\n        </div>\n\n        <div className=\"w-full h-8 leading-8 text-center   \">\n          请输入您的账号和密码\n        </div>\n        <div className=\"flex  w-full h-10  bg-white items-center \">\n          <input\n            className=\"flex-auto outline-none ml-2 \"\n            type=\"text\"\n            name=\"username\"\n            value={loginForm.username}\n            onChange={handleInput}\n            placeholder=\"用户名\"\n          ></input>\n          <BiUser className=\"mr-2\" />\n        </div>\n        <div className=\"flex bg-white  items-center w-full h-10 \">\n          <input\n            type=\"password\"\n            name=\"passwd\"\n            className=\"flex-auto outline-none ml-2\"\n            value={loginForm.passwd}\n            onChange={handleInput}\n            placeholder=\"登陆密码\"\n          ></input>\n          <RiLockPasswordLine className=\" mr-2\" />\n        </div>\n\n        <div className=\"w-full h-10 flex \">\n          <input\n            type=\"text\"\n            className=\"h-full w-2/4 outline-none pl-2\"\n            name=\"captchaCode\"\n            value={loginForm.captchaCode}\n            onChange={handleInput}\n            placeholder=\"验证码\"\n          ></input>\n          {captchaCode && (\n            <div\n              dangerouslySetInnerHTML={{ __html: captchaCode }}\n              onClick={() => getCaptcha()}\n            ></div>\n          )}\n        </div>\n\n        <button\n          className=\"w-full h-12 bg-sky-500 mt-4 font-bold text-white\"\n          onClick={handleClick}\n        >\n          登陆\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n","import http from './http'\n\n\nexport const LoginApi = (model) => http.post('/admin/login', model)\nexport const RegisterApi = (model) => http.post('/admin/register', model)\nexport const CaptchaApi = () => http.get('/common/captcha')\n\nexport const DashBoardApi = () => http.get('/admin/info/dashboard')\n\nexport const UserListApi = () => http.get('/admin/user/list')\nexport const UserBanApi = (id) => http.get('/admin/user/' + id)\nexport const UserEditApi = (model) => http.post('/admin/user', model)\nexport const UserRechageApi = (model) => http.put('/admin/user', model)\nexport const UserDelApi = (id) => http.delete('/admin/user/' + id)\n\nexport const RostateApi = () => http.get('/admin/info/rotate')\nexport const RostateSaveApi = (model) => http.post('/admin/info/rotate', model)\nexport const RostateDelApi = (id) => http.delete('/admin/info/rotate/' + id)\n\nexport const PostApi = () => http.get('/admin/info/post')\nexport const PostSaveApi = (model) => http.post('/admin/info/post', model)\nexport const PostDelApi = (id) => http.delete('/admin/info/post/' + id)\n\nexport const AboutApi = () => http.get('/admin/info/about')\nexport const AboutSaveApi = (model) => http.post('/admin/info/about', model)\n\nexport const ProductApi = () => http.get('/admin/product')\nexport const ProductSaveApi = (model) => http.post('/admin/product', model)\nexport const ProductDelApi = (id) => http.delete('/admin/product/' + id)\n\n","import Axios from 'axios';\nimport { toast } from 'react-toastify';\n\nconst http = Axios.create({\n  baseURL: process.env.REACT_APP_API_SERVER,\n  withCredentials: true,\n});\n\nhttp.interceptors.request.use(\n  (config) => {\n    if (localStorage.__web_token) {\n      config.headers.Authorization = 'Bearer ' + localStorage.__web_token;\n    }\n    if (localStorage.i18nextLng) {\n      config.headers['Accept-Language'] = localStorage.i18nextLng;\n    }\n    return config;\n  },\n  (err) => {\n    return Promise.reject(err);\n  }\n);\n\nhttp.interceptors.response.use(\n  (res) => {\n    if (res.data.message) {\n      toast.success(res.data.message);\n    }\n    return res;\n  },\n  (err) => {\n\t\t\n\t\t\n    if (err.response.status === 401) {\n      localStorage.removeItem('__web_token');\n\t\t\t\n      if (\n        window.location.pathname.indexOf('login') === -1 && \n\t\t\t\t\twindow.location.pathname.indexOf('register') === -1\n\t\t\t) {\n        window.location.hash = '/login';\n      }\n    }\n\n    if (err.response.data) {\n      console.log(err.response.data);\n\n      toast.error(err.response.data.message);\n      return Promise.reject(err);\n    }\n    return Promise.reject(err);\n  }\n);\n\nexport default http;\n"],"names":["useState","captchaCode","setCaptchaCode","username","passwd","loginForm","setLoginForm","navigate","useNavigate","useEffect","getCaptcha","CaptchaApi","then","res","data","svg","localStorage","setItem","token","handleInput","e","target","name","value","className","type","onChange","placeholder","dangerouslySetInnerHTML","__html","onClick","preventDefault","LoginApi","catch","toast","model","http","RegisterApi","DashBoardApi","UserListApi","UserBanApi","id","UserEditApi","UserDelApi","RostateApi","RostateSaveApi","RostateDelApi","PostApi","PostSaveApi","PostDelApi","AboutApi","AboutSaveApi","ProductApi","ProductSaveApi","ProductDelApi","Axios","baseURL","process","withCredentials","interceptors","request","use","config","__web_token","headers","Authorization","i18nextLng","err","Promise","reject","response","message","status","removeItem","window","location","pathname","indexOf","hash","console","log"],"sourceRoot":""}